<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <title>Slope Launcher</title>

    <link rel="icon" type="image/png" href="favicon.png">

    <script src="https://cdn.tailwindcss.com"></script>

    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        primary: "#10B981",
                        secondary: "#065F46",
                        bgDark: "#0d0d11",
                        panel: "rgba(255, 255, 255, 0.05)"
                    },
                    fontFamily: { sans: ["Inter", "sans-serif"] },
                    boxShadow: {
                        glow: "0 0 25px rgba(16,185,129,0.7)",
                        panel: "0 0 35px rgba(0,0,0,0.5)",
                    }
                }
            }
        }
    </script>

    <style>
        html, body {
            width: 100%;
            height: 100%;
            overflow: hidden;
            background: #0d0d11;
        }

        /* FIX: Use flexbox to stretch UI to full height */
        #launcher-wrapper {
            display: flex;
            flex-direction: column;
            width: 100vw;
            height: 100vh;
            overflow: hidden;
        }

        /* FIX: Fullscreen container */
        #fullscreen-game-container {
            position: fixed;
            inset: 0;
            width: 100vw;
            height: 100vh;
            background: black;
            z-index: 100;
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.35s ease-in-out;
        }
        #fullscreen-game-container.active {
            opacity: 1;
            pointer-events: auto;
        }
    </style>
</head>

<body class="text-white font-sans">

<div id="launcher-wrapper">

    <!-- HEADER -->
    <header class="w-full flex-none py-5 px-8 flex items-center justify-between 
        bg-panel backdrop-blur-md shadow-panel border-b border-white/10">
        <h1 class="text-3xl font-extrabold tracking-wide text-primary drop-shadow">
            SLOPE LAUNCHER
        </h1>
        <span class="text-gray-400 text-sm">Version 1.0</span>
    </header>

    <!-- MAIN AREA -->
    <div class="flex flex-1 min-h-0">

        <!-- SIDEBAR (NON-SCROLLING) -->
        <aside class="w-1/4 flex-none p-5 space-y-4 bg-panel backdrop-blur-md border-r border-white/10">
            <h2 class="text-xl font-bold text-primary">Versions</h2>
            <div id="version-list-container" class="space-y-3"></div>
        </aside>

        <!-- MAIN PANEL (FILLS HEIGHT, NO SCROLL) -->
        <main class="flex flex-col flex-1 min-h-0 p-8 space-y-6">

            <!-- Title -->
            <div>
                <h1 id="main-title" class="text-5xl font-extrabold tracking-tight"></h1>
                <p id="main-description" class="text-gray-400 text-lg mt-1"></p>
            </div>

            <!-- Thumbnail (flex-shrink allowed) -->
            <div class="rounded-2xl overflow-hidden shadow-panel border border-primary/20 
                bg-[#0f0f16] relative flex-none h-[clamp(200px,30vh,350px)]">
                <img id="game-thumbnail" class="w-full h-full object-cover opacity-60" />
                <div class="absolute inset-0 flex items-center justify-center">
                    <span class="bg-black/40 px-4 py-2 rounded-lg text-xl font-bold">PREVIEW</span>
                </div>
            </div>

            <!-- Details (flex-grow so it fits automatically) -->
            <div class="bg-panel backdrop-blur-md border border-white/10 rounded-xl p-5 flex-none">
                <h3 class="text-primary font-bold text-xl mb-1">Version Details</h3>
                <p id="main-info" class="text-gray-300"></p>
            </div>

            <!-- Bottom Bar (ALWAYS visible) -->
            <div class="mt-auto pt-4 border-t border-white/10 flex items-center justify-between">
                <div>
                    <p>Selected: <span id="current-selection-name" class="font-bold text-primary"></span></p>
                    <p id="current-url-display" class="text-gray-400 text-sm"></p>
                </div>

                <button id="launch-button"
                    onclick="launchGameInternal()"
                    class="px-10 py-4 rounded-2xl bg-primary shadow-glow hover:scale-105 transition-all font-bold text-xl">
                    LAUNCH
                </button>
            </div>

        </main>

    </div>
</div>

<!-- FULLSCREEN -->
<div id="fullscreen-game-container">
    <button onclick="stopGame()" class="absolute top-4 right-4 bg-red-500 px-4 py-2 rounded-lg font-bold border border-white shadow-lg">
        STOP
    </button>
    <iframe id="fullscreen-game-iframe" class="w-full h-full" src="about:blank" frameborder="0"></iframe>
</div>

<script>
const slopeVersions = [
    { id:'vP', name:'Slope Plus', desc:'Enhanced features', url:'https://bbcd.me/', info:'Highly optimized.', thumb:'https://1games.io/data/image/game/slope/slope.jpg' },
    { id:'v1', name:'Slope', desc:'Classic version', url:'https://slopenexus.github.io/games/27Sept/index.html', info:'Original gameplay.', thumb:'https://slopefree.org/assets/slope/slope.webp' },
    { id:'v2', name:'Slope 2', desc:'Unofficial sequel', url:'https://ucbg.github.io/slope-2-players/', info:'Runs smoother on some devices.', thumb:'https://images.sftcdn.net/images/t_app-cover-s,f_auto/p/ff1b5222-8eb8-41dd-aa6e-6dee5cd6e7a6/2839353243/slope-2-screenshot' },
    { id:'v3', name:'Slope 3', desc:'Third entry', url:'https://ubg44.github.io/Slope3/', info:'Latest unofficial build.', thumb:'https://slopefree.org/assets/slope/slope-3.webp' },
];

let selectedVersionId = slopeVersions[0].id;

function selectVersion(id) {
    const version = slopeVersions.find(v => v.id === id);

    document.querySelectorAll(".version-card").forEach(c =>
        c.classList.remove("border-primary", "shadow-glow")
    );

    document.getElementById("card-" + id).classList.add("border-primary", "shadow-glow");

    document.getElementById("main-title").textContent = version.name;
    document.getElementById("main-description").textContent = version.desc;
    document.getElementById("main-info").textContent = version.info;
    document.getElementById("game-thumbnail").src = version.thumb;
    document.getElementById("current-selection-name").textContent = version.name;
    document.getElementById("current-url-display").textContent = "URL: " + version.url;

    selectedVersionId = id;
}

function renderVersionList() {
    const container = document.getElementById("version-list-container");
    slopeVersions.forEach(v => {
        const div = document.createElement("div");
        div.id = "card-" + v.id;
        div.className = `
            version-card p-4 rounded-xl bg-panel backdrop-blur-md 
            border border-white/10 cursor-pointer hover:border-primary/40 hover:bg-white/10 transition-all
        `;
        div.innerHTML = `
            <h3 class="text-lg font-bold">${v.name}</h3>
            <p class="text-gray-400 text-sm">${v.desc}</p>
        `;
        div.onclick = () => selectVersion(v.id);
        container.appendChild(div);
    });
}

function launchGameInternal() {
    const v = slopeVersions.find(x => x.id === selectedVersionId);
    document.getElementById("fullscreen-game-iframe").src = v.url;
    document.getElementById("fullscreen-game-container").classList.add("active");
}

function stopGame() {
    document.getElementById("fullscreen-game-iframe").src = "about:blank";
    document.getElementById("fullscreen-game-container").classList.remove("active");
}

window.onload = () => {
    renderVersionList();
    selectVersion(slopeVersions[0].id);
};
</script>

</body>
</html>
